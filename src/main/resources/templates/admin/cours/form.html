<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/layout :: layout(~{::content}, 'Cours')}">
<body>
    <div th:fragment="content">
        <h1 class="mb-4">
            <span th:text="${cours.id != null ? 'Modifier le cours' : 'Nouveau cours'}"></span>
        </h1>

        <form th:action="${cours.id != null ? '/admin/cours/' + cours.id : '/admin/cours'}" 
              th:object="${cours}" method="post" class="row g-3">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <div class="col-12">
                <label class="form-label">Titre *</label>
                <input type="text" class="form-control" th:field="*{titre}" required>
            </div>
            <div class="col-12">
                <label class="form-label">Description</label>
                <textarea class="form-control" th:field="*{description}" rows="3"></textarea>
            </div>
            <div class="col-md-4">
                <label class="form-label">Nombre d'heures *</label>
                <input type="number" class="form-control" th:field="*{nombreHeures}" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Formateur *</label>
                <select class="form-select" th:field="*{formateur}" required>
                    <option value="">Sélectionner un formateur</option>
                    <option th:each="formateur : ${formateurs}" 
                            th:value="${formateur.id}" 
                            th:text="${formateur.nomComplet}"></option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Niveau</label>
                <select class="form-select" th:field="*{niveau}">
                    <option value="">Sélectionner un niveau</option>
                    <option th:each="niveau : ${niveaux}" 
                            th:value="${niveau}" 
                            th:text="${niveau}"></option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Session académique</label>
                <select class="form-select" name="sessionId">
                    <option value="">Sélectionner une session</option>
                    <option th:each="session : ${sessions}"
                            th:value="${session.id}"
                            th:selected="${cours.session != null && cours.session.id == session.id}"
                            th:text="${session.libelle + ' (' + session.annee + ' - ' + session.semestre + ')'}"></option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Spécialité</label>
                <select class="form-select" name="specialiteId">
                    <option value="">Sélectionner une spécialité</option>
                    <option th:each="sp : ${specialites}"
                            th:value="${sp.id}"
                            th:selected="${cours.specialite != null && cours.specialite.id == sp.id}"
                            th:text="${sp.libelle}"></option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Groupes (multi)</label>
                <select class="form-select" name="groupeIds" multiple size="4">
                    <option th:each="g : ${groupes}"
                            th:value="${g.id}"
                            th:selected="${cours.groupes != null && cours.groupes.contains(g)}"
                            th:text="${g.code + (g.nom != null ? ' - ' + g.nom : '')}"></option>
                </select>
                <small class="text-muted">Ctrl/Cmd + clic pour sélection multiple</small>
            </div>
            <div class="col-md-4">
                <label class="form-label">Date de début</label>
                <input type="date" class="form-control" th:field="*{dateDebut}">
            </div>
            <div class="col-md-4">
                <label class="form-label">Date de fin</label>
                <input type="date" class="form-control" th:field="*{dateFin}">
            </div>
            <div class="col-md-4">
                <label class="form-label"><i class="bi bi-currency-exchange"></i> Prix (DT)</label>
                <div class="input-group">
                    <input type="number" step="0.01" class="form-control" th:field="*{prix}" placeholder="0.00" min="0">
                    <span class="input-group-text bg-light">
                        <strong>DT</strong>
                    </span>
                </div>
                <small class="text-muted">Laissez vide ou 0 pour un cours gratuit</small>
            </div>
            <div class="col-12">
                <button type="submit" class="btn btn-info">Enregistrer</button>
                <a href="/admin/cours" class="btn btn-secondary">Annuler</a>
            </div>
        </form>
    </div>
</body>
</html>

